<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pathwise - Discover Your College Path</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }
        
        :root {
            --primary: #007AFF;
            --secondary: #5856D6;
            --success: #34C759;
            --warning: #FF9500;
            --danger: #FF3B30;
            --background: #F2F2F7;
            --card: #FFFFFF;
            --text-primary: #000000;
            --text-secondary: #3C3C43;
            --text-tertiary: #787880;
            --border-radius: 12px;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            --shadow-large: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.5;
        }
        
        /* Progress Bar */
        .progress-container {
            background: white;
            padding: 20px;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            position: relative;
        }
        
        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #E5E5EA;
            z-index: 1;
        }
        
        .progress-line-active {
            position: absolute;
            top: 20px;
            left: 0;
            height: 2px;
            background: var(--primary);
            z-index: 2;
            transition: width 0.5s ease;
        }
        
        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 3;
            cursor: pointer;
        }
        
        .progress-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 2px solid #E5E5EA;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .progress-step.active .progress-circle {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
            transform: scale(1.1);
        }
        
        .progress-step.completed .progress-circle {
            border-color: var(--success);
            background: var(--success);
            color: white;
        }
        
        .progress-label {
            margin-top: 8px;
            font-size: 12px;
            color: var(--text-tertiary);
            text-align: center;
        }
        
        .progress-step.active .progress-label {
            color: var(--primary);
            font-weight: 600;
        }
        
        /* Main Container */
        .main-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Phase Containers */
        .phase {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .phase.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .phase-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .phase-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 12px;
        }
        
        .phase-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
        }
        
        /* Cards */
        .card {
            background: var(--card);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .question-card {
            text-align: center;
            padding: 40px;
        }
        
        .question-text {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 32px;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .option-card {
            padding: 20px;
            border: 2px solid #E5E5EA;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .option-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .option-card.selected {
            border-color: var(--primary);
            background: rgba(0, 122, 255, 0.05);
        }
        
        .option-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .option-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .option-description {
            font-size: 14px;
            color: var(--text-tertiary);
        }
        
        /* Input Fields */
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .input-field {
            width: 100%;
            padding: 14px 16px;
            font-size: 17px;
            background: var(--background);
            border: 2px solid transparent;
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
            -webkit-appearance: none;
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
        }
        
        /* Buttons */
        .button-container {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 32px;
        }
        
        .btn {
            padding: 16px 32px;
            border-radius: var(--border-radius);
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-large);
        }
        
        .btn-secondary {
            background: var(--background);
            color: var(--text-primary);
            border: 2px solid var(--primary);
        }
        
        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Interest Tags */
        .interest-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .interest-tag {
            padding: 10px 20px;
            background: var(--background);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .interest-tag:hover {
            border-color: var(--primary);
        }
        
        .interest-tag.selected {
            background: var(--primary);
            color: white;
        }
        
        /* Discovery Results */
        .discovery-results {
            padding: 24px;
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.05), rgba(88, 86, 214, 0.05));
            border-radius: var(--border-radius);
            margin-bottom: 24px;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .result-label {
            font-weight: 600;
        }
        
        .result-value {
            color: var(--primary);
            font-weight: 600;
        }
        
        /* Navigation Tabs (Hidden Initially) */
        .main-nav {
            background: var(--card);
            padding: 12px;
            display: none;
            gap: 8px;
            overflow-x: auto;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 60px;
            z-index: 50;
        }
        
        .main-nav.unlocked {
            display: flex;
        }
        
        .nav-pill {
            padding: 10px 16px;
            border-radius: 20px;
            border: none;
            background: var(--background);
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 600;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-pill.active {
            background: var(--primary);
            color: white;
        }
        
        .nav-pill:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Personality Quiz */
        .personality-card {
            padding: 24px;
            background: var(--card);
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }
        
        .slider-container {
            margin: 24px 0;
        }
        
        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
        }
        
        .slider {
            width: 100%;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: #E5E5EA;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }
        
        /* School Recommendations */
        .school-rec-card {
            background: var(--card);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .school-rec-card:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-large);
        }
        
        .school-info h3 {
            font-size: 18px;
            margin-bottom: 4px;
        }
        
        .school-match-reason {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .match-score {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }
        
        @media (max-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .progress-label {
                font-size: 10px;
                max-width: 60px;
            }
            
            .phase-title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-steps">
            <div class="progress-line"></div>
            <div class="progress-line-active" id="progressLine" style="width: 0%;"></div>
            
            <div class="progress-step active" onclick="goToPhase(0)">
                <div class="progress-circle">1</div>
                <div class="progress-label">Discover</div>
            </div>
            <div class="progress-step" onclick="goToPhase(1)">
                <div class="progress-circle">2</div>
                <div class="progress-label">Explore</div>
            </div>
            <div class="progress-step" onclick="goToPhase(2)">
                <div class="progress-circle">3</div>
                <div class="progress-label">Academic</div>
            </div>
            <div class="progress-step" onclick="goToPhase(3)">
                <div class="progress-circle">4</div>
                <div class="progress-label">Match</div>
            </div>
            <div class="progress-step" onclick="goToPhase(4)">
                <div class="progress-circle">5</div>
                <div class="progress-label">Plan</div>
            </div>
        </div>
    </div>
    
    <!-- Navigation (Initially Hidden) -->
    <nav class="main-nav" id="mainNav">
        <button class="nav-pill" onclick="showDashboard()">üè† Dashboard</button>
        <button class="nav-pill" onclick="showSchools()">üéØ Schools</button>
        <button class="nav-pill" onclick="showFinancial()">üí∞ Financial</button>
        <button class="nav-pill" onclick="showDocuments()">üìÑ Documents</button>
        <button class="nav-pill" onclick="showTimeline()">üìÖ Timeline</button>
    </nav>
    
    <div class="main-container">
        <!-- Phase 1: Discovery -->
        <div id="phase-0" class="phase active">
            <div class="phase-header">
                <h1 class="phase-title">Let's Start Your Journey üöÄ</h1>
                <p class="phase-subtitle">No pressure - we'll discover your path together</p>
            </div>
            
            <div class="card question-card">
                <div class="question-text">How are you feeling about college?</div>
                <div class="options-grid">
                    <div class="option-card" onclick="selectFeeling('excited')">
                        <div class="option-icon">üòä</div>
                        <div class="option-title">Excited</div>
                        <div class="option-description">Ready to explore possibilities</div>
                    </div>
                    <div class="option-card" onclick="selectFeeling('uncertain')">
                        <div class="option-icon">ü§î</div>
                        <div class="option-title">Uncertain</div>
                        <div class="option-description">Not sure what I want yet</div>
                    </div>
                    <div class="option-card" onclick="selectFeeling('overwhelmed')">
                        <div class="option-icon">üò∞</div>
                        <div class="option-title">Overwhelmed</div>
                        <div class="option-description">It feels like a lot</div>
                    </div>
                    <div class="option-card" onclick="selectFeeling('curious')">
                        <div class="option-icon">üîç</div>
                        <div class="option-title">Curious</div>
                        <div class="option-description">Want to learn more</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">Quick Check-In</h3>
                <div class="input-group">
                    <label class="input-label">What grade are you in?</label>
                    <select class="input-field" id="gradeLevel">
                        <option value="">Select...</option>
                        <option value="9">9th Grade</option>
                        <option value="10">10th Grade</option>
                        <option value="11">11th Grade</option>
                        <option value="12">12th Grade</option>
                        <option value="transfer">Transfer Student</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label class="input-label">What's your first name? (Optional)</label>
                    <input type="text" class="input-field" id="firstName" placeholder="Just so we can personalize your experience">
                </div>
            </div>
            
            <div class="button-container">
                <button class="btn btn-primary" onclick="nextPhase()" id="phase0Next">Continue ‚Üí</button>
            </div>
        </div>
        
        <!-- Phase 2: Interest Discovery -->
        <div id="phase-1" class="phase">
            <div class="phase-header">
                <h1 class="phase-title">What Interests You? üí≠</h1>
                <p class="phase-subtitle">Select all that spark your curiosity (you can change these later)</p>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">Academic Interests</h3>
                <div class="interest-tags" id="academicInterests">
                    <div class="interest-tag" onclick="toggleInterest(this, 'stem')">üî¨ Science & Tech</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'arts')">üé® Arts & Design</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'business')">üíº Business</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'health')">‚öïÔ∏è Health & Medicine</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'social')">ü§ù Social Sciences</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'humanities')">üìö Humanities</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'environment')">üå± Environment</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'education')">üë©‚Äçüè´ Education</div>
                </div>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">Activities You Enjoy</h3>
                <div class="interest-tags" id="activityInterests">
                    <div class="interest-tag" onclick="toggleInterest(this, 'sports')">‚öΩ Sports</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'music')">üéµ Music</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'leadership')">üë• Leadership</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'volunteer')">üíù Volunteering</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'debate')">üí¨ Debate</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'creative')">‚ú® Creating Things</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'research')">üîç Research</div>
                    <div class="interest-tag" onclick="toggleInterest(this, 'travel')">‚úàÔ∏è Travel</div>
                </div>
            </div>
            
            <div class="card personality-card">
                <h3 style="margin-bottom: 16px;">How Do You Learn Best?</h3>
                
                <div class="slider-container">
                    <div class="slider-labels">
                        <span>Small Classes</span>
                        <span>Large Lectures</span>
                    </div>
                    <input type="range" class="slider" id="classSize" min="0" max="100" value="50">
                </div>
                
                <div class="slider-container">
                    <div class="slider-labels">
                        <span>Theory & Concepts</span>
                        <span>Hands-On Practice</span>
                    </div>
                    <input type="range" class="slider" id="learningStyle" min="0" max="100" value="50">
                </div>
                
                <div class="slider-container">
                    <div class="slider-labels">
                        <span>Independent Study</span>
                        <span>Group Projects</span>
                    </div>
                    <input type="range" class="slider" id="collaborationStyle" min="0" max="100" value="50">
                </div>
            </div>
            
            <div class="button-container">
                <button class="btn btn-secondary" onclick="previousPhase()">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextPhase()">Continue ‚Üí</button>
            </div>
        </div>
        
        <!-- Phase 3: Academic Profile -->
        <div id="phase-2" class="phase">
            <div class="phase-header">
                <h1 class="phase-title">Academic Snapshot üìö</h1>
                <p class="phase-subtitle">Just the basics - we'll help you improve where needed</p>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">Current Academic Standing</h3>
                <p style="color: var(--text-secondary); margin-bottom: 16px;">Don't worry about being perfect - we'll show you realistic options</p>
                
                <div class="input-group">
                    <label class="input-label">Approximate GPA (Optional)</label>
                    <input type="number" class="input-field" id="gpa" placeholder="3.5" step="0.1" max="5.0">
                    <small style="color: var(--text-tertiary);">Leave blank if you're not sure</small>
                </div>
                
                <div class="input-group">
                    <label class="input-label">Have you taken the SAT/ACT?</label>
                    <select class="input-field" id="testStatus">
                        <option value="not-taken">Not yet</option>
                        <option value="planning">Planning to take it</option>
                        <option value="taken">Yes, I have scores</option>
                        <option value="not-taking">Not planning to take it</option>
                    </select>
                </div>
                
                <div class="input-group" id="satScoreInput" style="display: none;">
                    <label class="input-label">SAT Score (Optional)</label>
                    <input type="number" class="input-field" id="satScore" placeholder="1200" max="1600">
                </div>
                
                <div class="input-group">
                    <label class="input-label">Challenging Courses</label>
                    <select class="input-field" id="challengingCourses">
                        <option value="0">Haven't taken any yet</option>
                        <option value="1-2">1-2 AP/Honors courses</option>
                        <option value="3-5">3-5 AP/Honors courses</option>
                        <option value="6+">6+ AP/Honors courses</option>
                    </select>
                </div>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">What Matters to You?</h3>
                <div class="options-grid">
                    <div class="option-card" onclick="togglePreference(this, 'location')">
                        <div class="option-icon">üìç</div>
                        <div class="option-title">Location</div>
                    </div>
                    <div class="option-card" onclick="togglePreference(this, 'cost')">
                        <div class="option-icon">üí∞</div>
                        <div class="option-title">Affordability</div>
                    </div>
                    <div class="option-card" onclick="togglePreference(this, 'size')">
                        <div class="option-icon">üë•</div>
                        <div class="option-title">School Size</div>
                    </div>
                    <div class="option-card" onclick="togglePreference(this, 'diversity')">
                        <div class="option-icon">üåà</div>
                        <div class="option-title">Diversity</div>
                    </div>
                </div>
            </div>
            
            <div class="button-container">
                <button class="btn btn-secondary" onclick="previousPhase()">‚Üê Back</button>
                <button class="btn btn-primary" onclick="nextPhase()">See My Matches ‚Üí</button>
            </div>
        </div>
        
        <!-- Phase 4: Initial Matches -->
        <div id="phase-3" class="phase">
            <div class="phase-header">
                <h1 class="phase-title">Your Personalized Matches üéØ</h1>
                <p class="phase-subtitle">Based on your interests and profile</p>
            </div>
            
            <div class="discovery-results">
                <h3 style="margin-bottom: 16px;">Your Discovery Summary</h3>
                <div class="result-item">
                    <span class="result-label">Top Interests:</span>
                    <span class="result-value" id="topInterests">Science & Tech, Arts</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Learning Style:</span>
                    <span class="result-value" id="learningStyleResult">Hands-on, Collaborative</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Academic Level:</span>
                    <span class="result-value" id="academicLevel">Strong (3.5+ GPA)</span>
                </div>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">üéØ Schools That Fit You</h3>
                <div id="schoolRecommendations">
                    <!-- Will be populated dynamically -->
                </div>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">üìö Suggested Majors</h3>
                <div id="majorRecommendations">
                    <!-- Will be populated dynamically -->
                </div>
            </div>
            
            <div class="button-container">
                <button class="btn btn-secondary" onclick="previousPhase()">‚Üê Adjust My Preferences</button>
                <button class="btn btn-primary" onclick="nextPhase()">Build My Plan ‚Üí</button>
            </div>
        </div>
        
        <!-- Phase 5: Action Plan -->
        <div id="phase-4" class="phase">
            <div class="phase-header">
                <h1 class="phase-title">Your Personalized Action Plan üöÄ</h1>
                <p class="phase-subtitle">Let's turn your discoveries into action</p>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">üéâ Congratulations!</h3>
                <p>You've completed the discovery process. Based on your responses, we've unlocked your personalized college planning tools.</p>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">Your Next Steps</h3>
                <ol style="line-height: 2; padding-left: 20px;">
                    <li><strong>Explore Your Matches:</strong> Review the schools we've identified for you</li>
                    <li><strong>Financial Planning:</strong> Calculate your expected costs and aid</li>
                    <li><strong>Academic Improvement:</strong> See specific steps to strengthen your profile</li>
                    <li><strong>Timeline:</strong> Get your personalized application schedule</li>
                    <li><strong>Documents:</strong> Track everything you need to submit</li>
                </ol>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 16px;">üîì Full Platform Unlocked!</h3>
                <p>You now have access to all features. Use the navigation menu above to explore:</p>
                <ul style="line-height: 2; padding-left: 20px; margin-top: 12px;">
                    <li>Dashboard - Your personalized overview</li>
                    <li>Schools - Detailed information about your matches</li>
                    <li>Financial - Calculate costs and aid</li>
                    <li>Documents - Track application materials</li>
                    <li>Timeline - See all important dates</li>
                </ul>
            </div>
            
            <div class="button-container">
                <button class="btn btn-secondary" onclick="previousPhase()">‚Üê Review My Matches</button>
                <button class="btn btn-primary" onclick="unlockFullPlatform()">Go to Dashboard ‚Üí</button>
            </div>
        </div>
    </div>
    
    <script>
        // User journey data
        let userJourney = {
            currentPhase: 0,
            feeling: '',
            grade: '',
            name: '',
            interests: {
                academic: [],
                activities: []
            },
            learningPreferences: {
                classSize: 50,
                style: 50,
                collaboration: 50
            },
            academicProfile: {
                gpa: null,
                testStatus: '',
                satScore: null,
                apCourses: ''
            },
            preferences: [],
            completedPhases: []
        };
        
        // Phase navigation
        function nextPhase() {
            if (validateCurrentPhase()) {
                userJourney.completedPhases.push(userJourney.currentPhase);
                userJourney.currentPhase++;
                updateProgress();
                showPhase(userJourney.currentPhase);
                
                // Generate recommendations when reaching phase 3
                if (userJourney.currentPhase === 3) {
                    generateRecommendations();
                }
            }
        }
        
        function previousPhase() {
            if (userJourney.currentPhase > 0) {
                userJourney.currentPhase--;
                updateProgress();
                showPhase(userJourney.currentPhase);
            }
        }
        
        function goToPhase(phase) {
            // Only allow going to completed phases or current phase
            if (phase <= userJourney.currentPhase) {
                showPhase(phase);
            }
        }
        
        function showPhase(phase) {
            document.querySelectorAll('.phase').forEach(p => p.classList.remove('active'));
            document.getElementById(`phase-${phase}`).classList.add('active');
            
            // Update progress indicators
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < phase) {
                    step.classList.add('completed');
                } else if (index === phase) {
                    step.classList.add('active');
                }
            });
        }
        
        function updateProgress() {
            const progress = (userJourney.currentPhase / 4) * 100;
            document.getElementById('progressLine').style.width = `${progress}%`;
        }
        
        function validateCurrentPhase() {
            switch(userJourney.currentPhase) {
                case 0:
                    // Validate phase 1 - at least grade selected
                    const grade = document.getElementById('gradeLevel').value;
                    if (!grade) {
                        alert('Please select your grade level');
                        return false;
                    }
                    userJourney.grade = grade;
                    userJourney.name = document.getElementById('firstName').value || 'Student';
                    return true;
                    
                case 1:
                    // Validate phase 2 - at least some interests selected
                    if (userJourney.interests.academic.length === 0 && userJourney.interests.activities.length === 0) {
                        alert('Please select at least one interest');
                        return false;
                    }
                    // Save learning preferences
                    userJourney.learningPreferences = {
                        classSize: document.getElementById('classSize').value,
                        style: document.getElementById('learningStyle').value,
                        collaboration: document.getElementById('collaborationStyle').value
                    };
                    return true;
                    
                case 2:
                    // Save academic profile
                    userJourney.academicProfile = {
                        gpa: document.getElementById('gpa').value || null,
                        testStatus: document.getElementById('testStatus').value,
                        satScore: document.getElementById('satScore').value || null,
                        apCourses: document.getElementById('challengingCourses').value
                    };
                    return true;
                    
                default:
                    return true;
            }
        }
        
        // Selection handlers
        function selectFeeling(feeling) {
            document.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));
            event.target.closest('.option-card').classList.add('selected');
            userJourney.feeling = feeling;
        }
        
        function toggleInterest(element, interest) {
            element.classList.toggle('selected');
            const type = element.parentElement.id === 'academicInterests' ? 'academic' : 'activities';
            const index = userJourney.interests[type].indexOf(interest);
            
            if (index > -1) {
                userJourney.interests[type].splice(index, 1);
            } else {
                userJourney.interests[type].push(interest);
            }
        }
        
        function togglePreference(element, preference) {
            element.classList.toggle('selected');
            const index = userJourney.preferences.indexOf(preference);
            
            if (index > -1) {
                userJourney.preferences.splice(index, 1);
            } else {
                userJourney.preferences.push(preference);
            }
        }
        
        // Show/hide SAT score input
        document.getElementById('testStatus')?.addEventListener('change', function() {
            const satInput = document.getElementById('satScoreInput');
            if (this.value === 'taken') {
                satInput.style.display = 'block';
            } else {
                satInput.style.display = 'none';
            }
        });
        
        // Generate personalized recommendations
        function generateRecommendations() {
            // Update summary
            const interests = [...userJourney.interests.academic, ...userJourney.interests.activities];
            document.getElementById('topInterests').textContent = interests.slice(0, 3).join(', ') || 'Exploring options';
            
            // Learning style
            const style = userJourney.learningPreferences.style > 50 ? 'Hands-on' : 'Theoretical';
            const collab = userJourney.learningPreferences.collaboration > 50 ? 'Collaborative' : 'Independent';
            document.getElementById('learningStyleResult').textContent = `${style}, ${collab}`;
            
            // Academic level
            const gpa = userJourney.academicProfile.gpa;
            let level = 'Developing';
            if (gpa >= 4.0) level = 'Excellent (4.0+ GPA)';
            else if (gpa >= 3.5) level = 'Strong (3.5+ GPA)';
            else if (gpa >= 3.0) level = 'Good (3.0+ GPA)';
            document.getElementById('academicLevel').textContent = level;
            
            // Generate school recommendations
            const schools = generateSchoolMatches();
            const schoolsHtml = schools.map(school => `
                <div class="school-rec-card">
                    <div class="school-info">
                        <h3>${school.name}</h3>
                        <div class="school-match-reason">${school.reason}</div>
                    </div>
                    <div class="match-score">${school.match}%</div>
                </div>
            `).join('');
            document.getElementById('schoolRecommendations').innerHTML = schoolsHtml;
            
            // Generate major recommendations
            const majors = generateMajorMatches();
            const majorsHtml = majors.map(major => `
                <div class="interest-tag selected" style="cursor: default; margin: 8px;">
                    ${major}
                </div>
            `).join('');
            document.getElementById('majorRecommendations').innerHTML = majorsHtml;
        }
        
        function generateSchoolMatches() {
            const schools = [];
            const hasSTEM = userJourney.interests.academic.includes('stem');
            const hasArts = userJourney.interests.academic.includes('arts');
            const gpa = userJourney.academicProfile.gpa || 3.5;
            
            // Logic to match schools based on profile
            if (gpa >= 4.0) {
                schools.push(
                    { name: 'UC Berkeley', match: 85, reason: 'Strong academics, matches your interests' },
                    { name: 'UCLA', match: 82, reason: 'Diverse programs, great location' }
                );
            } else if (gpa >= 3.5) {
                schools.push(
                    { name: 'UC San Diego', match: 88, reason: 'Balanced academics, innovative programs' },
                    { name: 'UC Davis', match: 90, reason: 'Supportive environment, strong programs' }
                );
            } else {
                schools.push(
                    { name: 'UC Santa Cruz', match: 92, reason: 'Alternative learning style, beautiful campus' },
                    { name: 'UC Riverside', match: 94, reason: 'Growing programs, supportive community' }
                );
            }
            
            if (hasSTEM) {
                schools.push({ name: 'Cal Poly SLO', match: 87, reason: 'Hands-on engineering programs' });
            }
            
            if (hasArts) {
                schools.push({ name: 'UC Irvine', match: 85, reason: 'Strong arts programs' });
            }
            
            return schools.slice(0, 5);
        }
        
        function generateMajorMatches() {
            const majors = [];
            const interests = userJourney.interests.academic;
            
            const majorMap = {
                'stem': ['Computer Science', 'Engineering', 'Biology', 'Physics'],
                'arts': ['Graphic Design', 'Fine Arts', 'Music', 'Theater'],
                'business': ['Business Administration', 'Marketing', 'Finance', 'Entrepreneurship'],
                'health': ['Pre-Med', 'Nursing', 'Public Health', 'Kinesiology'],
                'social': ['Psychology', 'Sociology', 'Anthropology', 'Political Science'],
                'humanities': ['English', 'History', 'Philosophy', 'Communications'],
                'environment': ['Environmental Science', 'Sustainability', 'Marine Biology'],
                'education': ['Education', 'Child Development', 'Special Education']
            };
            
            interests.forEach(interest => {
                if (majorMap[interest]) {
                    majors.push(...majorMap[interest].slice(0, 2));
                }
            });
            
            // Add undecided if no clear path
            if (majors.length === 0) {
                majors.push('Undeclared/Exploratory', 'Liberal Arts', 'General Studies');
            }
            
            return majors.slice(0, 6);
        }
        
        function unlockFullPlatform() {
            // Show navigation
            document.getElementById('mainNav').classList.add('unlocked');
            
            // Store journey data
            localStorage.setItem('userJourney', JSON.stringify(userJourney));
            localStorage.setItem('platformUnlocked', 'true');
            
            // In production, this would transition to the full platform
            alert('üéâ Congratulations! Your personalized college platform is now ready. The full dashboard with all features is now accessible.');
            
            // Could redirect to full platform or show additional sections
            showDashboard();
        }
        
        // Placeholder functions for full platform navigation
        function showDashboard() {
            alert('Dashboard: View your personalized overview, top schools, and action items');
        }
        
        function showSchools() {
            alert('Schools: Explore your matched schools in detail with requirements and deadlines');
        }
        
        function showFinancial() {
            alert('Financial Aid: Calculate your expected costs and available aid');
        }
        
        function showDocuments() {
            alert('Documents: Track all required application materials');
        }
        
        function showTimeline() {
            alert('Timeline: See your personalized application schedule');
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Check if user has already completed discovery
            const savedJourney = localStorage.getItem('userJourney');
            if (savedJourney) {
                const saved = JSON.parse(savedJourney);
                if (saved.completedPhases.length === 5) {
                    document.getElementById('mainNav').classList.add('unlocked');
                }
            }
        });
    </script>
</body>
</html>