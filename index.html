<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>CollegeQuest - Your AI College Planning Assistant</title>
  <style>
    /* === GEN ALPHA THEME / GLASSMORPHISM === */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --primary: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
      --secondary: linear-gradient(135deg, #F093FB 0%, #F5576C 100%);
      --success: linear-gradient(135deg, #00C896 0%, #00B4D8 100%);
      --dark: #0F0F1E;
      --light: #FFFFFF;
      --glass: rgba(255, 255, 255, 0.1);
      --border: rgba(255, 255, 255, 0.2);
      --text-primary: #FFFFFF;
      --text-secondary: rgba(255, 255, 255, 0.7);
    }
    body { font-family: 'Segoe UI', sans-serif; background: var(--dark); color: var(--text-primary); min-height: 100vh; }
    .animated-bg {
      position: fixed; inset: 0; z-index: -1;
      background: radial-gradient(circle at 20% 50%, rgba(102,126,234,0.3), transparent 50%),
                  radial-gradient(circle at 80% 80%, rgba(118,75,162,0.3), transparent 50%),
                  radial-gradient(circle at 40% 20%, rgba(240,147,251,0.3), transparent 50%);
      animation: backgroundShift 20s ease infinite;
    }
    @keyframes backgroundShift { 0%,100% {transform:scale(1);} 50%{transform:scale(1.1);} }
    .container { max-width: 1400px; margin: 0 auto; padding: 20px; }

    /* === HEADER === */
    header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; }
    .logo { font-size: 28px; font-weight: 800; background: var(--primary);
            -webkit-background-clip:text; -webkit-text-fill-color:transparent; }

    /* === NAVIGATION === */
    .nav-tabs { display: flex; gap: 10px; padding: 5px; background: var(--glass);
                border-radius: 50px; margin-bottom: 30px; overflow-x:auto; }
    .nav-tab { padding: 12px 24px; border-radius: 50px; cursor: pointer;
               background: transparent; color: var(--text-secondary); font-weight: 600; }
    .nav-tab.active { background: var(--primary); color: white; }

    /* === CARDS & BUTTONS === */
    .card { background: var(--glass); border-radius: 20px; padding: 20px; margin-bottom: 15px; border: 1px solid var(--border); }
    .btn { padding: 10px 20px; border-radius: 50px; cursor: pointer; border: none; font-weight: 600; }
    .btn-primary { background: var(--primary); color: white; }
    .btn-glass { background: var(--glass); color: white; border: 1px solid var(--border); }

    /* === FORMS === */
    .form-group { margin-bottom: 20px; }
    .form-label { font-size: 12px; text-transform: uppercase; margin-bottom: 6px; display: block; }
    .form-input { width: 100%; padding: 12px 15px; border-radius: 12px; border: 1px solid var(--border);
                  background: var(--glass); color: var(--text-primary); }

    /* === CHAT === */
    .ai-chat-container { background: var(--glass); border-radius: 20px; display:flex; flex-direction:column; height:400px; }
    .chat-messages { flex:1; overflow-y:auto; padding:15px; display:flex; flex-direction:column; gap:10px; }
    .message { max-width:70%; padding:10px 15px; border-radius:15px; }
    .message.user { align-self:flex-end; background: var(--primary); color:white; }
    .message.ai { align-self:flex-start; background: var(--glass); border:1px solid var(--border); }
    .chat-input-container { display:flex; gap:10px; padding:15px; border-top:1px solid var(--border); }
    .chat-input { flex:1; padding:10px 15px; border-radius:25px; border:1px solid var(--border); background: var(--glass); color:var(--text-primary);}
    .chat-send { width:48px; height:48px; border-radius:50%; background: var(--primary); color:white; display:flex; align-items:center; justify-content:center; }

    /* === GRID === */
    .schools-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(280px,1fr)); gap:20px; }
    .school-card { border-radius:15px; overflow:hidden; background:var(--glass); }
    .school-card img { width:100%; height:180px; object-fit:cover; }
    .school-content { padding:15px; }

    /* === SOCIAL FEED === */
    .social-feed { background: var(--glass); border-radius:20px; padding:20px; }
    .social-post { display:flex; gap:10px; border-bottom:1px solid var(--border); padding:10px 0; }
    .social-avatar { width:40px; height:40px; border-radius:50%; background:var(--primary); color:white; display:flex; align-items:center; justify-content:center; }

  </style>
</head>
<body>
  <div class="animated-bg"></div>
  <div class="container">

    <!-- === HEADER === -->
    <header>
      <div class="logo">üéì CollegeQuest</div>
      <div>
        <button class="btn btn-glass" onclick="toggleTheme()">üåô</button>
        <button class="btn btn-primary" onclick="showOnboarding()">Get Started</button>
      </div>
    </header>

    <!-- === NAVIGATION === -->
    <div class="nav-tabs">
      <button class="nav-tab active" onclick="showTab('planning')">Planning</button>
      <button class="nav-tab" onclick="showTab('dashboard')">Dashboard</button>
      <button class="nav-tab" onclick="showTab('compare')">Compare</button>
      <button class="nav-tab" onclick="showTab('ai-assistant')">AI Assistant</button>
      <button class="nav-tab" onclick="showTab('schools')">Schools</button>
      <button class="nav-tab" onclick="showTab('applications')">Applications</button>
      <button class="nav-tab" onclick="showTab('scholarships')">Scholarships</button>
      <button class="nav-tab" onclick="showTab('community')">Community</button>
    </div>

    <!-- === MAIN CONTENT === -->
    <main id="mainContent">

      <!-- PLANNING TAB -->
      <div id="planning-tab" class="tab-content">
        <h2>üìã College Planning Wizard</h2>
        <form id="planningForm">
          <div class="form-group"><label class="form-label">GPA</label><input type="number" id="gpa" class="form-input" step="0.1" min="0" max="4" required></div>
          <div class="form-group"><label class="form-label">SAT Score</label><input type="number" id="sat" class="form-input" min="400" max="1600" required></div>
          <div class="form-group"><label class="form-label">Residency</label>
            <select id="residency" class="form-input"><option value="in-state">In-State</option><option value="out-of-state">Out-of-State</option></select>
          </div>
          <div class="form-group"><label class="form-label">Budget (per year)</label><input type="number" id="budget" class="form-input" required></div>
          <div class="form-group"><label class="form-label">Intended Major</label><input type="text" id="major" class="form-input" placeholder="e.g., Computer Science"></div>
          <button type="submit" class="btn btn-primary">Get Recommendations ‚Üí</button>
        </form>
        <div id="recommendations" style="margin-top:20px; display:none;">
          <h3>üéØ School Recommendations</h3><div id="recosContainer"></div>
          <h3 style="margin-top:20px;">üí∞ Scholarship Matches</h3><div id="scholarshipsContainer"></div>
        </div>
      </div>

      <!-- DASHBOARD TAB -->
      <div id="dashboard-tab" class="tab-content" style="display:none;">
        <h2>Dashboard</h2>
        <div class="card">üéØ Applications Progress (coming soon)</div>
      </div>

      <!-- COMPARE TAB -->
      <div id="compare-tab" class="tab-content" style="display:none;">
        <h2>Compare In-State vs Out-of-State</h2>
        <div class="card">üí° AI Insight: Out-of-state gives stronger alumni network, but higher cost.</div>
      </div>

      <!-- AI ASSISTANT TAB -->
      <div id="ai-assistant-tab" class="tab-content" style="display:none;">
        <h2>AI College Assistant</h2>
        <div class="ai-chat-container">
          <div class="chat-messages" id="chatMessages"></div>
          <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" placeholder="Ask me anything..." onkeypress="handleChatEnter(event)">
            <button class="chat-send" onclick="sendChatMessage()">‚û§</button>
          </div>
        </div>
      </div>

      <!-- SCHOOLS TAB -->
      <div id="schools-tab" class="tab-content" style="display:none;">
        <h2>Schools</h2>
        <div class="schools-grid">
          <div class="school-card"><img src="https://images.unsplash.com/photo-1569330803634-e380c6b3d18f?w=400"><div class="school-content"><b>Harvard University</b><p>Cambridge, MA</p></div></div>
          <div class="school-card"><img src="https://images.unsplash.com/photo-1562113367-a26dd523e0c5?w=400"><div class="school-content"><b>Stanford University</b><p>Stanford, CA</p></div></div>
          <div class="school-card"><img src="https://images.unsplash.com/photo-1583223230879-9714f2e2b5b3?w=400"><div class="school-content"><b>UC Berkeley</b><p>Berkeley, CA</p></div></div>
        </div>
      </div>

      <!-- APPLICATIONS TAB -->
      <div id="applications-tab" class="tab-content" style="display:none;">
        <h2>Applications</h2>
        <div class="card">üìù Tracker coming soon</div>
      </div>

      <!-- SCHOLARSHIPS TAB -->
      <div id="scholarships-tab" class="tab-content" style="display:none;">
        <h2>Scholarships</h2>
        <div class="card">üí∞ Browse awards and deadlines (auto-populated after planning)</div>
      </div>

      <!-- COMMUNITY TAB -->
      <div id="community-tab" class="tab-content" style="display:none;">
        <h2>Community</h2>
        <div class="social-feed">
          <div class="social-post"><div class="social-avatar">JD</div><div><b>Jessica Davis</b><p>Just got accepted to UCLA! üéâ</p></div></div>
          <div class="social-post"><div class="social-avatar">MR</div><div><b>Mike Rodriguez</b><p>Pro tip: Start essays early! üìù</p></div></div>
        </div>
      </div>
    </main>
  </div>

  <script>
    const AppState = { recos:{}, scholarships:[], currentTab:'planning' };

    function showTab(tabName) {
      document.querySelectorAll('.tab-content').forEach(t=>t.style.display='none');
      document.querySelectorAll('.nav-tab').forEach(t=>t.classList.remove('active'));
      document.getElementById(`${tabName}-tab`).style.display='block';
      event.target.classList.add('active');
      AppState.currentTab=tabName;
    }

    // Planning form ‚Üí backend calls
    document.getElementById("planningForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      const gpa=parseFloat(document.getElementById("gpa").value);
      const sat=parseInt(document.getElementById("sat").value);
      const residency=document.getElementById("residency").value;
      const budget=parseInt(document.getElementById("budget").value);
      const major=document.getElementById("major").value;
      const matchRes=await fetch("/api/match",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gpa,sat,residency,budget,major})});
      const { recos }=await matchRes.json();
      const schRes=await fetch("/api/scholarships",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gpa,major})});
      const { scholarships }=await schRes.json();
      AppState.recos=recos; AppState.scholarships=scholarships;
      document.getElementById("recosContainer").innerHTML=`<h4>Reach Schools</h4><ul>${recos.reach.map(s=>`<li>${s.name}</li>`).join('')}</ul>
        <h4>Match Schools</h4><ul>${recos.match.map(s=>`<li>${s.name}</li>`).join('')}</ul>
        <h4>Safety Schools</h4><ul>${recos.safety.map(s=>`<li>${s.name}</li>`).join('')}</ul>`;
      document.getElementById("scholarshipsContainer").innerHTML=scholarships.map(s=>`<div class="card"><b>${s.name}</b> - $${s.amount}</div>`).join('');
      document.getElementById("recommendations").style.display="block";
    });

    // AI Chat
    async function sendChatMessage(){
      const input=document.getElementById("chatInput");
      const msg=input.value.trim(); if(!msg) return;
      const chat=document.getElementById("chatMessages");
      chat.innerHTML+=`<div class="message user">${msg}</div>`;
      input.value="";
      const res=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:msg})});
      const data=await res.json();
      chat.innerHTML+=`<div class="message ai">${data.response}</div>`;
      chat.scrollTop=chat.scrollHeight;
    }
    function handleChatEnter(e){ if(e.key==="Enter") sendChatMessage(); }
  </script>
</body>
</html>
