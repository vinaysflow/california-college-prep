<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Pathwise - Your College Journey</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #007AFF;
            --secondary: #5856D6;
            --success: #34C759;
            --warning: #FF9500;
            --danger: #FF3B30;
            --dark: #1C1C1E;
            --gray: #8E8E93;
            --light-gray: #C7C7CC;
            --background: #F2F2F7;
            --card: #FFFFFF;
            --border-radius: 14px;
            --border-radius-large: 20px;
            --shadow: 0 2px 10px rgba(0,0,0,0.08);
            --shadow-large: 0 10px 40px rgba(0,0,0,0.12);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Dark Mode Variables */
        [data-theme="dark"] {
            --dark: #F2F2F7;
            --background: #000000;
            --card: #1C1C1E;
            --gray: #98989D;
            --light-gray: #48484A;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", sans-serif;
            background: var(--background);
            color: var(--dark);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            transition: var(--transition);
        }

        /* Animations */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes checkmark {
            0% { stroke-dashoffset: 100; }
            100% { stroke-dashoffset: 0; }
        }

        /* Navigation Header */
        .nav-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 0.5px solid rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            transition: var(--transition);
        }

        [data-theme="dark"] .nav-header {
            background: rgba(28,28,30,0.9);
            border-bottom-color: rgba(255,255,255,0.1);
        }

        .nav-back {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--background);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            color: var(--primary);
        }

        .nav-back:hover {
            background: var(--light-gray);
            transform: scale(1.1);
        }

        .nav-back:active {
            transform: scale(0.95);
        }

        .nav-title {
            font-size: 17px;
            font-weight: 600;
            color: var(--dark);
        }

        .nav-actions {
            display: flex;
            gap: 8px;
        }

        .nav-action {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--background);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            color: var(--primary);
        }

        .nav-action:hover {
            transform: scale(1.1);
        }

        /* Main Container */
        .container {
            padding-top: 60px;
            min-height: 100vh;
            max-width: 100%;
            margin: 0 auto;
        }

        /* Progress Bar */
        .progress-container {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .progress-bar {
            height: 6px;
            background: var(--light-gray);
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
            transition: width 0.5s ease;
            box-shadow: 0 2px 8px rgba(0,122,255,0.3);
        }

        .progress-text {
            text-align: center;
            margin-top: 12px;
            font-size: 14px;
            color: var(--gray);
        }

        /* Discovery Cards */
        .discovery-container {
            padding: 0 20px 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .discovery-card {
            background: var(--card);
            border-radius: var(--border-radius-large);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .discovery-card.slide-in {
            animation: slideIn 0.5s ease;
        }

        .discovery-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .discovery-subtitle {
            font-size: 17px;
            color: var(--gray);
            margin-bottom: 30px;
        }

        /* Input Styles */
        .input-group {
            margin-bottom: 24px;
            position: relative;
        }

        .input-label {
            font-size: 13px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .required-indicator {
            color: var(--danger);
            font-size: 16px;
        }

        .optional-badge {
            background: var(--light-gray);
            color: var(--gray);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
        }

        .input-field {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--light-gray);
            border-radius: var(--border-radius);
            font-size: 17px;
            transition: var(--transition);
            background: var(--background);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--card);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,122,255,0.15);
        }

        .input-error {
            border-color: var(--danger);
        }

        .error-message {
            color: var(--danger);
            font-size: 13px;
            margin-top: 4px;
        }

        /* Button Styles */
        .button {
            padding: 16px 32px;
            border-radius: var(--border-radius);
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-align: center;
            min-height: 52px;
        }

        .button-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            position: relative;
            overflow: hidden;
        }

        .button-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,122,255,0.3);
        }

        .button-primary:active {
            transform: translateY(0);
        }

        .button-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .button-secondary {
            background: var(--background);
            color: var(--primary);
        }

        .button-secondary:hover {
            background: var(--light-gray);
        }

        /* Interest Pills */
        .interest-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 30px;
        }

        .interest-pill {
            padding: 14px 20px;
            border-radius: 25px;
            background: var(--background);
            border: 2px solid var(--light-gray);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            font-size: 15px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 52px;
        }

        .interest-pill:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .interest-pill.selected {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-color: transparent;
            animation: pulse 0.3s ease;
        }

        /* Preference Cards */
        .preference-grid {
            display: grid;
            gap: 16px;
            margin-bottom: 30px;
        }

        .preference-card {
            padding: 20px;
            border-radius: var(--border-radius);
            background: var(--background);
            border: 2px solid var(--light-gray);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .preference-card:hover {
            border-color: var(--primary);
            transform: translateX(4px);
        }

        .preference-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(0,122,255,0.05), rgba(88,86,214,0.05));
        }

        .preference-card.selected .preference-icon {
            animation: pulse 0.3s ease;
        }

        .preference-icon {
            font-size: 28px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card);
            border-radius: 12px;
        }

        .preference-text {
            flex: 1;
        }

        .preference-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .preference-desc {
            font-size: 14px;
            color: var(--gray);
        }

        /* Dashboard */
        .dashboard-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease;
        }

        .welcome-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: var(--border-radius-large);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .welcome-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 3s infinite;
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            position: relative;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-large);
        }

        .stat-label {
            font-size: 13px;
            color: var(--gray);
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--dark);
            transition: var(--transition);
        }

        .stat-value.updating {
            animation: pulse 0.5s ease;
        }

        /* School Categories */
        .school-category {
            margin-bottom: 30px;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .category-title {
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .category-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-reach {
            background: linear-gradient(135deg, rgba(255, 59, 48, 0.1), rgba(255, 149, 0, 0.1));
            color: var(--danger);
        }

        .badge-match {
            background: linear-gradient(135deg, rgba(52, 199, 89, 0.1), rgba(0, 122, 255, 0.1));
            color: var(--success);
        }

        .badge-safety {
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.1), rgba(88, 86, 214, 0.1));
            color: var(--primary);
        }

        /* School Cards */
        .schools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .school-card {
            background: var(--card);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            animation: fadeIn 0.5s ease;
        }

        .school-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-large);
        }

        .school-card.selected {
            border: 2px solid var(--primary);
        }

        .school-remove {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--danger);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            opacity: 0.8;
        }

        .school-remove:hover {
            opacity: 1;
            transform: scale(1.1);
        }

        /* Loading States */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--light-gray);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 8px;
            padding: 20px 0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab-nav::-webkit-scrollbar {
            height: 0;
        }

        .tab-button {
            padding: 12px 24px;
            border-radius: 20px;
            background: var(--background);
            border: none;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            position: relative;
        }

        .tab-button:hover {
            background: var(--light-gray);
        }

        .tab-button.active {
            background: var(--primary);
            color: white;
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background: var(--primary);
            border-radius: 2px;
        }

        /* Consent Modal */
        .consent-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .consent-content {
            background: var(--card);
            border-radius: var(--border-radius-large);
            padding: 30px;
            max-width: 500px;
            width: 100%;
            animation: slideIn 0.5s ease;
        }

        .consent-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .consent-title {
            font-size: 24px;
            font-weight: 700;
            flex: 1;
        }

        .info-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--light-gray);
            color: var(--gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            position: relative;
        }

        .info-tooltip {
            position: absolute;
            bottom: 32px;
            right: 0;
            background: var(--dark);
            color: white;
            padding: 12px;
            border-radius: 12px;
            width: 250px;
            font-size: 13px;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 10;
        }

        .info-icon:hover .info-tooltip {
            opacity: 1;
            visibility: visible;
        }

        .consent-text {
            font-size: 16px;
            color: var(--gray);
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .consent-actions {
            display: flex;
            gap: 12px;
        }

        .consent-button {
            flex: 1;
            padding: 16px;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .consent-yes {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .consent-no {
            background: var(--background);
            color: var(--gray);
        }

        /* AI Assistant */
        .ai-bubble {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 16px 20px;
            border-radius: 20px;
            box-shadow: var(--shadow-large);
            max-width: 280px;
            z-index: 999;
            animation: slideIn 0.5s ease;
            cursor: pointer;
        }

        .ai-bubble-close {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--dark);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
        }

        /* Gamification Elements */
        .achievement-badge {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--card);
            border-radius: var(--border-radius);
            padding: 16px 20px;
            box-shadow: var(--shadow-large);
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.5s ease;
            z-index: 900;
        }

        .achievement-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--warning), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .achievement-text {
            flex: 1;
        }

        .achievement-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .achievement-desc {
            font-size: 12px;
            color: var(--gray);
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--card);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            z-index: 100;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .discovery-card {
                padding: 20px;
            }

            .discovery-title {
                font-size: 24px;
            }

            .interest-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .schools-grid {
                grid-template-columns: 1fr;
            }

            .consent-actions {
                flex-direction: column;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Consent Modal -->
    <div class="consent-modal" id="consentModal">
        <div class="consent-content">
            <div class="consent-header">
                <div class="consent-title">Welcome to Pathwise!</div>
                <div class="info-icon">
                    i
                    <div class="info-tooltip">
                        We store your data locally on your device. We only use your email for sending deadline reminders. Your information is never sold or shared with third parties.
                    </div>
                </div>
            </div>
            <div class="consent-text">
                Let's build your personalized path to California colleges. We'll need to save your progress and send you important reminders. Ready to start?
            </div>
            <div class="input-group">
                <label class="input-label">
                    Email for Reminders
                    <span class="optional-badge">Optional</span>
                </label>
                <input type="email" class="input-field" id="userEmail" placeholder="your.email@example.com">
            </div>
            <div class="consent-actions">
                <button class="consent-button consent-yes" onclick="acceptConsent()">Yes, Let's Go!</button>
                <button class="consent-button consent-no" onclick="declineConsent()">No Thanks</button>
            </div>
        </div>
    </div>

    <!-- Navigation Header -->
    <div class="nav-header">
        <button class="nav-back" id="backBtn" onclick="goBack()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H19v-2z"/>
            </svg>
        </button>
        <div class="nav-title">Pathwise</div>
        <div class="nav-actions">
            <button class="nav-action" onclick="showShare()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
                </svg>
            </button>
            <button class="nav-action" onclick="resetApp()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Discovery Flow -->
        <div id="discoverySection">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 20%"></div>
                </div>
                <div class="progress-text" id="progressText">Getting Started - 20% Complete</div>
            </div>

            <div class="discovery-container">
                <!-- Step 1: Basic Info -->
                <div id="step1" class="discovery-card">
                    <div class="discovery-title">Let's Get Started</div>
                    <div class="discovery-subtitle">First, tell us a bit about yourself</div>
                    
                    <div class="input-group">
                        <label class="input-label">
                            First Name
                            <span class="required-indicator">*</span>
                        </label>
                        <input type="text" class="input-field" id="firstName" placeholder="What should we call you?">
                        <div class="error-message hidden" id="nameError">Please enter your name</div>
                    </div>

                    <div class="input-group">
                        <label class="input-label">
                            Current Grade
                            <span class="required-indicator">*</span>
                        </label>
                        <select class="input-field" id="gradeLevel">
                            <option value="">Select your grade</option>
                            <option value="9">Freshman (9th)</option>
                            <option value="10">Sophomore (10th)</option>
                            <option value="11">Junior (11th)</option>
                            <option value="12">Senior (12th)</option>
                            <option value="transfer">Transfer Student</option>
                        </select>
                        <div class="error-message hidden" id="gradeError">Please select your grade</div>
                    </div>

                    <button class="button button-primary" onclick="validateAndNext(1)">
                        Continue
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
                        </svg>
                    </button>
                </div>

                <!-- Step 2: Interests -->
                <div id="step2" class="discovery-card hidden">
                    <div class="discovery-title">What's Your Vibe?</div>
                    <div class="discovery-subtitle">Select what interests you (pick as many as you want)</div>
                    
                    <div class="interest-grid">
                        <div class="interest-pill" data-interest="stem">
                            <span>üî¨</span>
                            <span>STEM</span>
                        </div>
                        <div class="interest-pill" data-interest="arts">
                            <span>üé®</span>
                            <span>Arts</span>
                        </div>
                        <div class="interest-pill" data-interest="business">
                            <span>üíº</span>
                            <span>Business</span>
                        </div>
                        <div class="interest-pill" data-interest="health">
                            <span>üè•</span>
                            <span>Health</span>
                        </div>
                        <div class="interest-pill" data-interest="social">
                            <span>ü§ù</span>
                            <span>Social</span>
                        </div>
                        <div class="interest-pill" data-interest="humanities">
                            <span>üìö</span>
                            <span>Humanities</span>
                        </div>
                        <div class="interest-pill" data-interest="education">
                            <span>üéì</span>
                            <span>Education</span>
                        </div>
                        <div class="interest-pill" data-interest="unsure">
                            <span>ü§î</span>
                            <span>Not Sure</span>
                        </div>
                    </div>

                    <div style="display: flex; gap: 12px;">
                        <button class="button button-secondary" onclick="prevStep()">Back</button>
                        <button class="button button-primary" style="flex: 1;" onclick="validateAndNext(2)">Continue</button>
                    </div>
                </div>

                <!-- Step 3: Preferences -->
                <div id="step3" class="discovery-card hidden">
                    <div class="discovery-title">What Matters Most?</div>
                    <div class="discovery-subtitle">Help us understand your priorities</div>
                    
                    <div class="preference-grid">
                        <div class="preference-card" data-preference="reputation">
                            <div class="preference-icon">üèÜ</div>
                            <div class="preference-text">
                                <div class="preference-title">School Reputation</div>
                                <div class="preference-desc">Prestigious name and ranking</div>
                            </div>
                        </div>
                        <div class="preference-card" data-preference="cost">
                            <div class="preference-icon">üí∞</div>
                            <div class="preference-text">
                                <div class="preference-title">Affordability</div>
                                <div class="preference-desc">Minimizing student debt</div>
                            </div>
                        </div>
                        <div class="preference-card" data-preference="location">
                            <div class="preference-icon">üìç</div>
                            <div class="preference-text">
                                <div class="preference-title">Location</div>
                                <div class="preference-desc">Close to home or new adventure</div>
                            </div>
                        </div>
                        <div class="preference-card" data-preference="size">
                            <div class="preference-icon">üë•</div>
                            <div class="preference-text">
                                <div class="preference-title">Campus Size</div>
                                <div class="preference-desc">Large university or small college</div>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 12px;">
                        <button class="button button-secondary" onclick="prevStep()">Back</button>
                        <button class="button button-primary" style="flex: 1;" onclick="validateAndNext(3)">Continue</button>
                    </div>
                </div>

                <!-- Step 4: Academics -->
                <div id="step4" class="discovery-card hidden">
                    <div class="discovery-title">Academic Snapshot</div>
                    <div class="discovery-subtitle">This helps us match you with the right schools</div>
                    
                    <div class="input-group">
                        <label class="input-label">
                            Current GPA
                            <span class="optional-badge">Optional</span>
                        </label>
                        <input type="number" class="input-field" id="gpa" placeholder="e.g., 3.75" min="0" max="5" step="0.01" onchange="recalculateMatches()">
                    </div>

                    <div class="input-group">
                        <label class="input-label">
                            SAT Score
                            <span class="optional-badge">Optional</span>
                        </label>
                        <input type="number" class="input-field" id="sat" placeholder="e.g., 1400" min="400" max="1600" onchange="recalculateMatches()">
                    </div>

                    <div class="input-group">
                        <label class="input-label">
                            AP/Honors Courses
                            <span class="optional-badge">Optional</span>
                        </label>
                        <input type="number" class="input-field" id="apCourses" placeholder="How many?" min="0" onchange="recalculateMatches()">
                    </div>

                    <div style="display: flex; gap: 12px;">
                        <button class="button button-secondary" onclick="prevStep()">Back</button>
                        <button class="button button-primary" style="flex: 1;" onclick="completeDiscovery()">
                            See My Matches
                            <span id="matchPreview" style="margin-left: 8px;"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard -->
        <div id="dashboardSection" class="dashboard-container hidden">
            <div class="welcome-card">
                <div class="welcome-title">Welcome back, <span id="userName">Student</span>!</div>
                <div style="font-size: 17px; opacity: 0.9;">Your personalized college roadmap is ready</div>
            </div>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Your GPA</div>
                    <div class="stat-value" id="userGPA">3.75</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Target Schools</div>
                    <div class="stat-value" id="schoolCount">9</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Days Until Deadline</div>
                    <div class="stat-value" id="daysLeft">72</div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-nav">
                <button class="tab-button active" onclick="showTab('schools')">Schools</button>
                <button class="tab-button" onclick="showTab('financial')">Financial Aid</button>
                <button class="tab-button" onclick="showTab('documents')">Documents</button>
                <button class="tab-button" onclick="showTab('timeline')">Timeline</button>
            </div>

            <!-- Content Tabs -->
            <div id="schoolsTab">
                <!-- School categories populated dynamically -->
            </div>

            <div id="financialTab" class="hidden">
                <!-- Financial aid content populated dynamically -->
            </div>

            <div id="documentsTab" class="hidden">
                <!-- Documents content populated dynamically -->
            </div>

            <div id="timelineTab" class="hidden">
                <!-- Timeline content populated dynamically -->
            </div>
        </div>
    </div>

    <!-- AI Assistant -->
    <div class="ai-bubble hidden" id="aiBubble">
        <div class="ai-bubble-close" onclick="hideAI()">√ó</div>
        <div style="font-weight: 600; margin-bottom: 8px;">Need Some Help?</div>
        <div id="aiMessage">I noticed you haven't selected anything. Want me to guide you?</div>
    </div>

    <!-- Achievement Badge -->
    <div class="achievement-badge hidden" id="achievementBadge">
        <div class="achievement-icon">üèÜ</div>
        <div class="achievement-text">
            <div class="achievement-title" id="achievementTitle">Profile Explorer</div>
            <div class="achievement-desc" id="achievementDesc">You've completed your profile!</div>
        </div>
    </div>

    <!-- Theme Toggle -->
    <div class="theme-toggle" onclick="toggleTheme()">
        <span id="themeIcon">üåô</span>
    </div>

    <!-- Share Modal -->
    <div class="overlay hidden" id="overlay" onclick="hideShare()"></div>
    <div class="share-modal hidden" id="shareModal">
        <!-- Share content -->
    </div>

    <script>
        // Core application state
        let currentStep = 1;
        const totalSteps = 4;
        let aiAttempts = 0;
        let userData = {
            firstName: '',
            gradeLevel: '',
            interests: [],
            preferences: [],
            gpa: 3.75,
            sat: 1400,
            apCourses: 4,
            email: '',
            consent: false,
            selectedSchools: []
        };

        // California schools database with real data
        const californiaSchools = [
            { id: 1, name: 'UC Berkeley', avgGPA: 4.25, avgSAT: 1450, type: 'reach', acceptanceRate: 14.5, tuition: 14226 },
            { id: 2, name: 'UCLA', avgGPA: 4.26, avgSAT: 1445, type: 'reach', acceptanceRate: 12.3, tuition: 13401 },
            { id: 3, name: 'UC San Diego', avgGPA: 4.16, avgSAT: 1410, type: 'reach', acceptanceRate: 31.5, tuition: 14616 },
            { id: 4, name: 'UC Davis', avgGPA: 4.13, avgSAT: 1350, type: 'match', acceptanceRate: 37.6, tuition: 14597 },
            { id: 5, name: 'UC Irvine', avgGPA: 4.08, avgSAT: 1360, type: 'match', acceptanceRate: 26.5, tuition: 13727 },
            { id: 6, name: 'UC Santa Barbara', avgGPA: 4.15, avgSAT: 1380, type: 'match', acceptanceRate: 29.6, tuition: 14391 },
            { id: 7, name: 'Cal Poly SLO', avgGPA: 4.06, avgSAT: 1395, type: 'match', acceptanceRate: 32.5, tuition: 10377 },
            { id: 8, name: 'UC Santa Cruz', avgGPA: 3.96, avgSAT: 1295, type: 'safety', acceptanceRate: 51.3, tuition: 13991 },
            { id: 9, name: 'San Diego State', avgGPA: 3.85, avgSAT: 1270, type: 'safety', acceptanceRate: 37.8, tuition: 7720 }
        ];

        // Initialize application
        window.onload = function() {
            const savedData = localStorage.getItem('pathwiseUserData');
            const hasConsent = localStorage.getItem('pathwiseConsent');
            const theme = localStorage.getItem('pathwiseTheme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
            
            if (!hasConsent) {
                document.getElementById('consentModal').style.display = 'flex';
            } else {
                document.getElementById('consentModal').style.display = 'none';
                if (savedData) {
                    userData = JSON.parse(savedData);
                    showDashboard();
                } else {
                    document.getElementById('backBtn').style.display = 'none';
                }
            }

            setupEventListeners();
            updateProgressBar();
        };

        // Event Listeners Setup
        function setupEventListeners() {
            // Interest pills
            document.querySelectorAll('.interest-pill').forEach(pill => {
                pill.addEventListener('click', function() {
                    this.classList.toggle('selected');
                    const interest = this.dataset.interest;
                    
                    if (this.classList.contains('selected')) {
                        if (!userData.interests.includes(interest)) {
                            userData.interests.push(interest);
                        }
                    } else {
                        userData.interests = userData.interests.filter(i => i !== interest);
                    }
                    
                    // Clear "not sure" if other interests selected
                    if (interest !== 'unsure' && this.classList.contains('selected')) {
                        const unsurePill = document.querySelector('[data-interest="unsure"]');
                        if (unsurePill) {
                            unsurePill.classList.remove('selected');
                            userData.interests = userData.interests.filter(i => i !== 'unsure');
                        }
                    }
                });
            });

            // Preference cards
            document.querySelectorAll('.preference-card').forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('selected');
                    const preference = this.dataset.preference;
                    
                    if (this.classList.contains('selected')) {
                        if (!userData.preferences.includes(preference)) {
                            userData.preferences.push(preference);
                        }
                    } else {
                        userData.preferences = userData.preferences.filter(p => p !== preference);
                    }
                });
            });
        }

        // Consent handling
        function acceptConsent() {
            userData.consent = true;
            userData.email = document.getElementById('userEmail').value;
            localStorage.setItem('pathwiseConsent', 'true');
            if (userData.email) {
                localStorage.setItem('pathwiseEmail', userData.email);
            }
            document.getElementById('consentModal').style.display = 'none';
            document.getElementById('backBtn').style.display = 'none';
            showAchievement('Journey Started', 'Welcome to Pathwise!');
        }

        function declineConsent() {
            document.getElementById('consentModal').style.display = 'none';
            alert('You can use Pathwise without saving data, but your progress won\'t be saved.');
            document.getElementById('backBtn').style.display = 'none';
        }

        // Validation and Navigation
        function validateAndNext(step) {
            let isValid = true;
            
            if (step === 1) {
                const name = document.getElementById('firstName').value.trim();
                const grade = document.getElementById('gradeLevel').value;
                
                if (!name) {
                    document.getElementById('nameError').classList.remove('hidden');
                    document.getElementById('firstName').classList.add('input-error');
                    isValid = false;
                } else {
                    document.getElementById('nameError').classList.add('hidden');
                    document.getElementById('firstName').classList.remove('input-error');
                    userData.firstName = name;
                }
                
                if (!grade) {
                    document.getElementById('gradeError').classList.remove('hidden');
                    document.getElementById('gradeLevel').classList.add('input-error');
                    isValid = false;
                } else {
                    document.getElementById('gradeError').classList.add('hidden');
                    document.getElementById('gradeLevel').classList.remove('input-error');
                    userData.gradeLevel = grade;
                }
            } else if (step === 2) {
                if (userData.interests.length === 0) {
                    showAIAssistant('I see you haven\'t selected any interests. That\'s totally fine! You can select "Not Sure" or pick what sounds interesting.');
                    return;
                }
            } else if (step === 3) {
                if (userData.preferences.length === 0) {
                    showAIAssistant('No preferences selected? No worries! Pick what matters most to you, or we can use balanced recommendations.');
                    return;
                }
            }
            
            if (isValid) {
                nextStep();
            }
        }

        function nextStep() {
            document.getElementById(`step${currentStep}`).classList.add('hidden');
            currentStep++;
            document.getElementById(`step${currentStep}`).classList.remove('hidden');
            document.getElementById(`step${currentStep}`).classList.add('slide-in');
            updateProgressBar();
            
            // Achievement for completing steps
            if (currentStep === 3) {
                showAchievement('Interest Explorer', 'You\'ve identified your interests!');
            }
        }

        function prevStep() {
            document.getElementById(`step${currentStep}`).classList.add('hidden');
            currentStep--;
            document.getElementById(`step${currentStep}`).classList.remove('hidden');
            updateProgressBar();
        }

        function updateProgressBar() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            const messages = [
                'Getting Started - 20% Complete',
                'Building Your Profile - 40% Complete',
                'Understanding Priorities - 60% Complete',
                'Almost There - 80% Complete',
                'Ready to Launch - 100% Complete'
            ];
            
            document.getElementById('progressText').textContent = messages[currentStep - 1] || messages[0];
        }

        // Real-time recalculation
        function recalculateMatches() {
            const gpa = parseFloat(document.getElementById('gpa').value) || 0;
            const sat = parseInt(document.getElementById('sat').value) || 0;
            
            if (gpa > 0) {
                let matchCount = 0;
                californiaSchools.forEach(school => {
                    const score = calculateMatchScore(school, gpa, sat);
                    if (score > 30) matchCount++;
                });
                
                document.getElementById('matchPreview').textContent = `(${matchCount} matches found)`;
            }
        }

        function calculateMatchScore(school, gpa = userData.gpa, sat = userData.sat) {
            let score = 50;
            
            if (gpa) {
                const gpaDiff = gpa - school.avgGPA;
                score += gpaDiff * 20;
            }
            
            if (sat) {
                const satDiff = (sat - school.avgSAT) / 10;
                score += satDiff;
            }
            
            // Interest matching
            if (userData.interests.includes('stem') && (school.name.includes('UC') || school.name.includes('Cal Poly'))) {
                score += 10;
            }
            
            // Preference matching
            if (userData.preferences.includes('reputation') && school.acceptanceRate < 30) {
                score += 10;
            }
            if (userData.preferences.includes('cost') && school.tuition < 12000) {
                score += 15;
            }
            
            // AP courses bonus
            score += (userData.apCourses || 0) * 2;
            
            return Math.max(0, Math.min(100, Math.round(score)));
        }

        function completeDiscovery() {
            userData.gpa = parseFloat(document.getElementById('gpa').value) || 3.75;
            userData.sat = parseInt(document.getElementById('sat').value) || 1400;
            userData.apCourses = parseInt(document.getElementById('apCourses').value) || 4;
            
            localStorage.setItem('pathwiseUserData', JSON.stringify(userData));
            showAchievement('Profile Complete', 'Your college journey begins!');
            
            setTimeout(() => {
                showDashboard();
            }, 1000);
        }

        function showDashboard() {
            document.getElementById('discoverySection').classList.add('hidden');
            document.getElementById('dashboardSection').classList.remove('hidden');
            document.getElementById('backBtn').style.display = 'block';
            
            populateDashboard();
        }

        function populateDashboard() {
            // Update user info
            document.getElementById('userName').textContent = userData.firstName || 'Student';
            document.getElementById('userGPA').textContent = userData.gpa ? userData.gpa.toFixed(2) : '3.75';
            
            // Calculate deadline
            const deadline = new Date('November 30, 2025');
            const today = new Date();
            const days = Math.floor((deadline - today) / (1000 * 60 * 60 * 24));
            document.getElementById('daysLeft').textContent = days > 0 ? days : '0';
            
            // Generate schools
            generateSchoolRecommendations();
            
            // Populate other tabs
            populateFinancialAid();
            populateDocuments();
            populateTimeline();
        }

        function generateSchoolRecommendations() {
            const schoolsTab = document.getElementById('schoolsTab');
            
            const reach = [];
            const match = [];
            const safety = [];
            
            californiaSchools.forEach(school => {
                const score = calculateMatchScore(school);
                const category = categorizeSchool(school, score);
                
                const schoolCard = createSchoolCard(school, score);
                
                if (category === 'reach') reach.push(schoolCard);
                else if (category === 'match') match.push(schoolCard);
                else safety.push(schoolCard);
            });
            
            schoolsTab.innerHTML = `
                <div class="school-category">
                    <div class="category-header">
                        <div class="category-title">
                            <span>üéØ</span>
                            <span>Reach Schools</span>
                        </div>
                        <div class="category-badge badge-reach">Aim High!</div>
                    </div>
                    <div class="schools-grid">${reach.join('')}</div>
                </div>
                
                <div class="school-category">
                    <div class="category-header">
                        <div class="category-title">
                            <span>‚úÖ</span>
                            <span>Match Schools</span>
                        </div>
                        <div class="category-badge badge-match">Great Fit!</div>
                    </div>
                    <div class="schools-grid">${match.join('')}</div>
                </div>
                
                <div class="school-category">
                    <div class="category-header">
                        <div class="category-title">
                            <span>üõ°Ô∏è</span>
                            <span>Safety Schools</span>
                        </div>
                        <div class="category-badge badge-safety">Solid Backup!</div>
                    </div>
                    <div class="schools-grid">${safety.join('')}</div>
                </div>
            `;
            
            document.getElementById('schoolCount').textContent = reach.length + match.length + safety.length;
        }

        function createSchoolCard(school, score) {
            const matchLevel = score > 70 ? 'high' : score > 50 ? 'medium' : 'low';
            const matchClass = score > 70 ? 'match-high' : score > 50 ? 'match-medium' : 'match-low';
            
            return `
                <div class="school-card">
                    <div class="school-remove" onclick="removeSchool(${school.id})">√ó</div>
                    <div class="school-header">
                        <div class="school-name">${school.name}</div>
                        <div class="match-badge ${matchClass}">${score}% match</div>
                    </div>
                    <div style="color: var(--gray); margin-bottom: 8px;">
                        Avg GPA: ${school.avgGPA} | SAT: ${school.avgSAT}
                    </div>
                    <div style="font-size: 14px; color: var(--gray);">
                        Acceptance Rate: ${school.acceptanceRate}%<br>
                        Tuition: $${school.tuition.toLocaleString()}/year
                    </div>
                </div>
            `;
        }

        function categorizeSchool(school, score) {
            if (!userData.gpa) return school.type;
            
            const gpaDiff = userData.gpa - school.avgGPA;
            
            if (gpaDiff < -0.3 || score < 40) {
                return 'reach';
            } else if (gpaDiff > 0.3 || score > 70) {
                return 'safety';
            } else {
                return 'match';
            }
        }

        function populateFinancialAid() {
            const financialTab = document.getElementById('financialTab');
            
            // Calculate estimated aid
            const familyIncome = 75000; // Default
            let pellGrant = familyIncome < 50000 ? 7395 : familyIncome < 70000 ? 3000 : 0;
            let calGrant = familyIncome < 80000 && userData.gpa >= 3.0 ? 12570 : 0;
            let totalAid = pellGrant + calGrant;
            
            financialTab.innerHTML = `
                <div class="discovery-card">
                    <div class="discovery-title">Your Financial Aid Estimate</div>
                    <div class="discovery-subtitle">Based on typical California resident profile</div>
                    
                    <div style="background: linear-gradient(135deg, rgba(52, 199, 89, 0.1), rgba(0, 122, 255, 0.1)); padding: 24px; border-radius: 16px; margin: 24px 0;">
                        <div style="font-size: 14px; color: var(--gray); margin-bottom: 8px;">Estimated Annual Aid</div>
                        <div style="font-size: 36px; font-weight: 700; color: var(--success);">$${totalAid.toLocaleString()}</div>
                    </div>
                    
                    <div style="display: grid; gap: 16px;">
                        <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--light-gray);">
                            <span>Federal Pell Grant</span>
                            <span style="font-weight: 600;">$${pellGrant.toLocaleString()}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--light-gray);">
                            <span>Cal Grant</span>
                            <span style="font-weight: 600;">$${calGrant.toLocaleString()}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--light-gray);">
                            <span>Middle Class Scholarship</span>
                            <span style="font-weight: 600;">Check Eligibility</span>
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px; padding: 16px; background: var(--background); border-radius: 12px;">
                        <div style="font-size: 14px; color: var(--gray);">
                            These are estimates based on 2024-2025 rates. Actual aid depends on your FAFSA application.
                        </div>
                    </div>
                </div>
            `;
        }

        function populateDocuments() {
            const documentsTab = document.getElementById('documentsTab');
            
            documentsTab.innerHTML = `
                <div class="discovery-card">
                    <div class="discovery-title">Application Checklist</div>
                    <div class="discovery-subtitle">Track your progress</div>
                    
                    <div class="document-list" style="display: grid; gap: 16px; margin-top: 24px;">
                        <div class="document-item" style="display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--background); border-radius: 12px;">
                            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--success); color: white; display: flex; align-items: center; justify-content: center;">‚úì</div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600;">Personal Information</div>
                                <div style="font-size: 14px; color: var(--gray);">Profile completed</div>
                            </div>
                        </div>
                        
                        <div class="document-item" style="display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--background); border-radius: 12px;">
                            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--warning); color: white; display: flex; align-items: center; justify-content: center;">!</div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600;">Transcripts</div>
                                <div style="font-size: 14px; color: var(--gray);">Request from counselor by Oct 15</div>
                            </div>
                        </div>
                        
                        <div class="document-item" style="display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--background); border-radius: 12px;">
                            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--danger); color: white; display: flex; align-items: center; justify-content: center;">√ó</div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600;">Letters of Recommendation</div>
                                <div style="font-size: 14px; color: var(--gray);">Need 2-3 teachers</div>
                            </div>
                        </div>
                        
                        <div class="document-item" style="display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--background); border-radius: 12px;">
                            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--danger); color: white; display: flex; align-items: center; justify-content: center;">√ó</div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600;">FAFSA</div>
                                <div style="font-size: 14px; color: var(--gray);">Opens October 1, 2025</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px; padding: 16px; background: linear-gradient(135deg, rgba(255, 149, 0, 0.1), rgba(255, 59, 48, 0.1)); border-radius: 12px;">
                        <div style="font-weight: 600; margin-bottom: 8px;">üìä Your Progress: 17% Complete</div>
                        <div style="height: 8px; background: var(--light-gray); border-radius: 4px; overflow: hidden;">
                            <div style="width: 17%; height: 100%; background: linear-gradient(90deg, var(--warning), var(--danger));"></div>
                        </div>
                    </div>
                </div>
            `;
        }

        function populateTimeline() {
            const timelineTab = document.getElementById('timelineTab');
            
            timelineTab.innerHTML = `
                <div class="discovery-card">
                    <div class="discovery-title">Your Application Timeline</div>
                    <div class="discovery-subtitle">Key dates and deadlines</div>
                    
                    <div style="margin-top: 24px;">
                        <div class="timeline-item" style="padding: 20px; background: var(--background); border-radius: 12px; margin-bottom: 16px; border-left: 4px solid var(--primary);">
                            <div style="font-size: 14px; color: var(--gray);">August 1, 2025</div>
                            <div style="font-size: 18px; font-weight: 600; margin: 8px 0;">UC Application Opens</div>
                            <div style="color: var(--gray);">Start your UC application and essays</div>
                        </div>
                        
                        <div class="timeline-item" style="padding: 20px; background: var(--background); border-radius: 12px; margin-bottom: 16px; border-left: 4px solid var(--success);">
                            <div style="font-size: 14px; color: var(--gray);">October 1, 2025</div>
                            <div style="font-size: 18px; font-weight: 600; margin: 8px 0;">FAFSA Opens</div>
                            <div style="color: var(--gray);">Submit ASAP for maximum aid</div>
                        </div>
                        
                        <div class="timeline-item" style="padding: 20px; background: var(--background); border-radius: 12px; margin-bottom: 16px; border-left: 4px solid var(--warning);">
                            <div style="font-size: 14px; color: var(--gray);">November 15, 2025</div>
                            <div style="font-size: 18px; font-weight: 600; margin: 8px 0;">Priority Submission</div>
                            <div style="color: var(--gray);">Submit early for better chances</div>
                        </div>
                        
                        <div class="timeline-item" style="padding: 20px; background: var(--background); border-radius: 12px; margin-bottom: 16px; border-left: 4px solid var(--danger);">
                            <div style="font-size: 14px; color: var(--gray);">November 30, 2025</div>
                            <div style="font-size: 18px; font-weight: 600; margin: 8px 0;">UC/CSU Deadline</div>
                            <div style="color: var(--gray);">Final deadline - no extensions!</div>
                        </div>
                        
                        <div class="timeline-item" style="padding: 20px; background: var(--background); border-radius: 12px; margin-bottom: 16px; border-left: 4px solid var(--primary);">
                            <div style="font-size: 14px; color: var(--gray);">March 15-30, 2026</div>
                            <div style="font-size: 18px; font-weight: 600; margin: 8px 0;">Decisions Released</div>
                            <div style="color: var(--gray);">Check your portals!</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function goBack() {
            if (!document.getElementById('dashboardSection').classList.contains('hidden')) {
                document.getElementById('dashboardSection').classList.add('hidden');
                document.getElementById('discoverySection').classList.remove('hidden');
                currentStep = 1;
                document.querySelectorAll('.discovery-card').forEach((card, index) => {
                    card.classList.toggle('hidden', index !== 0);
                });
                updateProgressBar();
                document.getElementById('backBtn').style.display = 'none';
            }
        }

        function resetApp() {
            if (confirm('This will reset all your data and start over. Are you sure?')) {
                localStorage.removeItem('pathwiseUserData');
                localStorage.removeItem('pathwiseConsent');
                location.reload();
            }
        }

        function showTab(tabName) {
            // Update active button
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Hide all tabs with animation
            document.querySelectorAll('[id$="Tab"]').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Show selected tab
            setTimeout(() => {
                document.getElementById(tabName + 'Tab').classList.remove('hidden');
            }, 100);
        }

        function removeSchool(schoolId) {
            userData.selectedSchools = userData.selectedSchools.filter(id => id !== schoolId);
            localStorage.setItem('pathwiseUserData', JSON.stringify(userData));
            generateSchoolRecommendations();
            
            // Animate the update
            const statCard = document.getElementById('schoolCount').parentElement;
            statCard.classList.add('updating');
            setTimeout(() => statCard.classList.remove('updating'), 500);
        }

        // AI Assistant Functions
        function showAIAssistant(message) {
            const bubble = document.getElementById('aiBubble');
            const aiMessage = document.getElementById('aiMessage');
            
            aiMessage.textContent = message || 'Need help? I noticed you might be stuck.';
            bubble.classList.remove('hidden');
            
            setTimeout(() => {
                if (!bubble.classList.contains('hidden')) {
                    bubble.classList.add('hidden');
                }
            }, 8000);
        }

        function hideAI() {
            document.getElementById('aiBubble').classList.add('hidden');
        }

        // Achievement System
        function showAchievement(title, description) {
            const badge = document.getElementById('achievementBadge');
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementDesc').textContent = description;
            
            badge.classList.remove('hidden');
            
            setTimeout(() => {
                badge.classList.add('hidden');
            }, 3000);
        }

        // Theme Toggle
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('pathwiseTheme', newTheme);
            
            const icon = document.getElementById('themeIcon');
            icon.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            
            // Add transition animation
            document.body.style.transition = 'background 0.3s ease';
        }

        // Share Functions
        function showShare() {
            const overlay = document.getElementById('overlay');
            const modal = document.getElementById('shareModal');
            
            overlay.classList.remove('hidden');
            modal.classList.remove('hidden');
            
            modal.innerHTML = `
                <div style="font-size: 20px; font-weight: 600; margin-bottom: 20px;">Share Pathwise</div>
                <div class="share-options" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 20px;">
                    <div class="share-option" onclick="shareVia('message')" style="display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer;">
                        <div style="width: 60px; height: 60px; border-radius: 12px; background: #34C759; display: flex; align-items: center; justify-content: center; font-size: 24px;">üí¨</div>
                        <span style="font-size: 13px;">Message</span>
                    </div>
                    <div class="share-option" onclick="shareVia('whatsapp')" style="display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer;">
                        <div style="width: 60px; height: 60px; border-radius: 12px; background: #25D366; display: flex; align-items: center; justify-content: center; font-size: 24px;">üì±</div>
                        <span style="font-size: 13px;">WhatsApp</span>
                    </div>
                    <div class="share-option" onclick="shareVia('copy')" style="display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer;">
                        <div style="width: 60px; height: 60px; border-radius: 12px; background: #007AFF; display: flex; align-items: center; justify-content: center; font-size: 24px;">üìã</div>
                        <span style="font-size: 13px;">Copy Link</span>
                    </div>
                    <div class="share-option" onclick="shareVia('email')" style="display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer;">
                        <div style="width: 60px; height: 60px; border-radius: 12px; background: #FF9500; display: flex; align-items: center; justify-content: center; font-size: 24px;">‚úâÔ∏è</div>
                        <span style="font-size: 13px;">Email</span>
                    </div>
                </div>
                <button class="button button-secondary" style="width: 100%;" onclick="hideShare()">Cancel</button>
            `;
        }

        function hideShare() {
            document.getElementById('overlay').classList.add('hidden');
            document.getElementById('shareModal').classList.add('hidden');
        }

        function shareVia(method) {
            const url = window.location.href;
            const text = 'Check out Pathwise - Smart college planning for California students!';
            
            switch(method) {
                case 'message':
                    if (navigator.share) {
                        navigator.share({ title: 'Pathwise', text: text, url: url });
                    }
                    break;
                case 'whatsapp':
                    window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`);
                    break;
                case 'copy':
                    navigator.clipboard.writeText(url);
                    showAchievement('Link Copied!', 'Share with friends');
                    break;
                case 'email':
                    window.location.href = `mailto:?subject=Check out Pathwise&body=${encodeURIComponent(text + ' ' + url)}`;
                    break;
            }
            hideShare();
        } align-items: center; justify-content: center;">√ó</div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600;">Personal Statement</div>
                                <div style="font-size: 14px; color: var(--gray);">4 essays for UC applications</div>
                            </div>
                        </div>
                        
                        <div class="document-item" style="display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--background); border-radius: 12px;">
                            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--danger); color: white; display: flex;